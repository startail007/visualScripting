!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=50)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a}));var o=n(0),r=n.n(o),i=n(1),u=n.n(i),s=n(7),c=function(){function t(){r()(this,t)}return u()(t,null,[{key:"normalize",value:function(e){return t.length(e)?t.scale(e,1/t.length(e)):e}},{key:"rotate",value:function(t,e){var n=Math.cos(e),o=Math.sin(e);return[t[0]*n-t[1]*o,t[1]*n+t[0]*o]}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"cross",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"projection",value:function(e,n){var o=t.dot(e,n)/t.dot(n,n);return[n[0]*o,n[1]*o]}},{key:"length",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"mul",value:function(t,e){return[t[0]*e[0],t[1]*e[1]]}},{key:"div",value:function(t,e){return[t[0]/e[0],t[1]/e[1]]}},{key:"scale",value:function(t,e){return[t[0]*e,t[1]*e]}},{key:"collisionCalc",value:function(e,n,o,r){return t.scale(t.add(t.scale(e,o-r),t.scale(n,2*r)),1/(o+r))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}},{key:"floor",value:function(t){return[Math.floor(t[0]),Math.floor(t[1])]}},{key:"fract",value:function(t){return[s.a.fract(t[0]),s.a.fract(t[1])]}},{key:"sin",value:function(t){return[Math.sin(t[0]),Math.sin(t[1])]}},{key:"cos",value:function(t){return[Math.cos(t[0]),Math.cos(t[1])]}},{key:"distance",value:function(e,n){return t.length(t.sub(n,e))}},{key:"mix",value:function(t,e,n){return[s.a.mix(t[0],e[0],n),s.a.mix(t[1],e[1],n)]}},{key:"abs",value:function(t){return[Math.abs(t[0]),Math.abs(t[1])]}},{key:"getLine",value:function(e,n){return{pos:e,dir:t.sub(n,e)}}},{key:"min",value:function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}},{key:"max",value:function(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}}]),t}(),a=function(){function t(){r()(this,t)}return u()(t,null,[{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"normalize",value:function(e){var n=c.length(e);return n&&t.scale(e,1/n),e}},{key:"add",value:function(t,e){return t[0]+=e[0],t[1]+=e[1],t}},{key:"sub",value:function(t,e){return t[0]-=e[0],t[1]-=e[1],t}},{key:"scale",value:function(t,e){return t[0]*=e,t[1]*=e,t}},{key:"rotate",value:function(t,e){var n=Math.cos(e),o=Math.sin(e),r=[t[0]*n-t[1]*o,t[1]*n+t[0]*o];return t[0]=r[0],t[1]=r[1],t}}]),t}()},function(t,e,n){"use strict";var o=n(35),r=n(38),i=n(20),u=function(){return o.apply(this,arguments)};u.m=o,u.trust=o.trust,u.fragment=o.fragment,u.mount=i.mount,u.route=n(43),u.render=n(28),u.redraw=i.redraw,u.request=r.request,u.jsonp=r.jsonp,u.parseQueryString=n(31),u.buildQueryString=n(29),u.parsePathname=n(22),u.buildPathname=n(21),u.vnode=n(11),u.PromisePolyfill=n(26),t.exports=u},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var o=n(33);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(0),r=n.n(o),i=n(1),u=n.n(i),s=function(){function t(){r()(this,t)}return u()(t,null,[{key:"mix",value:function(t,e,n){return t*(1-n)+e*n}},{key:"fract",value:function(t){return(t%=1)<0?t+1:t}},{key:"inverseMix",value:function(t,e,n){return(n-t)/(e-t)}},{key:"clamp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<=e?e:t>=n?n:t}},{key:"smoothstep",value:function(t,e,n){return(n=clamp(inverseMix(t,e,n)))*n*(3-2*n)}},{key:"guid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}}]),t}()},function(t,e,n){var o=n(34),r=n(13);t.exports=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){var o=n(14),r=n(15),i=n(16),u=n(17);t.exports=function(t){return o(t)||r(t)||i(t)||u()}},function(t,e,n){var o=n(46);function r(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=o(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},r(e,n,i||e)}t.exports=r},function(t,e,n){"use strict";function o(t,e,n,o,r,i){return{tag:t,key:e,attrs:n,children:o,text:r,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}o.normalize=function(t){return Array.isArray(t)?o("[",void 0,void 0,o.normalizeChildren(t),void 0,void 0):null==t||"boolean"==typeof t?null:"object"==typeof t?t:o("#",void 0,void 0,String(t),void 0,void 0)},o.normalizeChildren=function(t){var e=[];if(t.length){for(var n=null!=t[0]&&null!=t[0].key,r=1;r<t.length;r++)if((null!=t[r]&&null!=t[r].key)!==n)throw new TypeError("Vnodes must either always have keys or never have keys!");for(r=0;r<t.length;r++)e[r]=o.normalize(t[r])}return e},t.exports=o},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var o=n(12);t.exports=function(t){if(Array.isArray(t))return o(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var o=n(12);t.exports=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(t){o=u}}();var c,a=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?a=c.concat(a):f=-1,a.length&&d())}function d(){if(!l){var t=s(p);l=!0;for(var e=a.length;e;){for(c=a,a=[];++f<e;)c&&c[f].run();f=-1,e=a.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new h(t,e)),1!==a.length||l||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var o=n(28);t.exports=n(41)(o,requestAnimationFrame,console)},function(t,e,n){"use strict";var o=n(29),r=n(30);t.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names *must* be separated");if(null==e)return t;var n=t.indexOf("?"),i=t.indexOf("#"),u=i<0?t.length:i,s=n<0?u:n,c=t.slice(0,s),a={};r(a,e);var l=c.replace(/:([^\/\.-]+)(\.{3})?/g,(function(t,n,o){return delete a[n],null==e[n]?t:o?e[n]:encodeURIComponent(String(e[n]))})),f=l.indexOf("?"),p=l.indexOf("#"),d=p<0?l.length:p,h=f<0?d:f,v=l.slice(0,h);n>=0&&(v+=t.slice(n,u)),f>=0&&(v+=(n<0?"?":"&")+l.slice(f,d));var y=o(a);return y&&(v+=(n<0&&f<0?"?":"&")+y),i>=0&&(v+=t.slice(i)),p>=0&&(v+=(i<0?"":"&")+l.slice(p)),v}},function(t,e,n){"use strict";var o=n(31);t.exports=function(t){var e=t.indexOf("?"),n=t.indexOf("#"),r=n<0?t.length:n,i=e<0?r:e,u=t.slice(0,i).replace(/\/{2,}/g,"/");return u?("/"!==u[0]&&(u="/"+u),u.length>1&&"/"===u[u.length-1]&&(u=u.slice(0,-1))):u="/",{path:u,params:e<0?{}:o(t.slice(e+1,r))}}},function(t,e,n){"use strict";var o=n(11),r=n(24),i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,u={},s={}.hasOwnProperty;function c(t){for(var e in t)if(s.call(t,e))return!1;return!0}function a(t){for(var e,n="div",o=[],r={};e=i.exec(t);){var s=e[1],c=e[2];if(""===s&&""!==c)n=c;else if("#"===s)r.id=c;else if("."===s)o.push(c);else if("["===e[3][0]){var a=e[6];a&&(a=a.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?o.push(a):r[e[4]]=""===a?a:a||!0}}return o.length>0&&(r.className=o.join(" ")),u[t]={tag:n,attrs:r}}function l(t,e){var n=e.attrs,r=o.normalizeChildren(e.children),i=s.call(n,"class"),u=i?n.class:n.className;if(e.tag=t.tag,e.attrs=null,e.children=void 0,!c(t.attrs)&&!c(n)){var a={};for(var l in n)s.call(n,l)&&(a[l]=n[l]);n=a}for(var l in t.attrs)s.call(t.attrs,l)&&"className"!==l&&!s.call(n,l)&&(n[l]=t.attrs[l]);for(var l in null==u&&null==t.attrs.className||(n.className=null!=u?null!=t.attrs.className?String(t.attrs.className)+" "+String(u):u:null!=t.attrs.className?t.attrs.className:null),i&&(n.class=null),n)if(s.call(n,l)&&"key"!==l){e.attrs=n;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?e.text=r[0].children:e.children=r,e}t.exports=function(t){if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");var e=r.apply(1,arguments);return"string"==typeof t&&(e.children=o.normalizeChildren(e.children),"["!==t)?l(u[t]||a(t),e):(e.tag=t,e)}},function(t,e,n){"use strict";var o=n(11);t.exports=function(){var t,e=arguments[this],n=this+1;if(null==e?e={}:("object"!=typeof e||null!=e.tag||Array.isArray(e))&&(e={},n=this),arguments.length===n+1)t=arguments[n],Array.isArray(t)||(t=[t]);else for(t=[];n<arguments.length;)t.push(arguments[n++]);return o("",e.key,e,t)}},function(t,e,n){"use strict";(function(e){var o=n(26);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=o:window.Promise.prototype.finally||(window.Promise.prototype.finally=o.prototype.finally),t.exports=window.Promise):void 0!==e?(void 0===e.Promise?e.Promise=o:e.Promise.prototype.finally||(e.Promise.prototype.finally=o.prototype.finally),t.exports=e.Promise):t.exports=o}).call(this,n(18))},function(t,e,n){"use strict";(function(e){var n=function(t){if(!(this instanceof n))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var o=this,r=[],i=[],u=l(r,!0),s=l(i,!1),c=o._instance={resolvers:r,rejectors:i},a="function"==typeof e?e:setTimeout;function l(t,e){return function n(u){var l;try{if(!e||null==u||"object"!=typeof u&&"function"!=typeof u||"function"!=typeof(l=u.then))a((function(){e||0!==t.length||console.error("Possible unhandled promise rejection:",u);for(var o=0;o<t.length;o++)t[o](u);r.length=0,i.length=0,c.state=e,c.retry=function(){n(u)}}));else{if(u===o)throw new TypeError("Promise can't be resolved w/ itself");f(l.bind(u))}}catch(t){s(t)}}}function f(t){var e=0;function n(t){return function(n){e++>0||t(n)}}var o=n(s);try{t(n(u),o)}catch(t){o(t)}}f(t)};n.prototype.then=function(t,e){var o,r,i=this._instance;function u(t,e,n,u){e.push((function(e){if("function"!=typeof t)n(e);else try{o(t(e))}catch(t){r&&r(t)}})),"function"==typeof i.retry&&u===i.state&&i.retry()}var s=new n((function(t,e){o=t,r=e}));return u(t,i.resolvers,o,!0),u(e,i.rejectors,r,!1),s},n.prototype.catch=function(t){return this.then(null,t)},n.prototype.finally=function(t){return this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){return n.reject(e)}))}))},n.resolve=function(t){return t instanceof n?t:new n((function(e){e(t)}))},n.reject=function(t){return new n((function(e,n){n(t)}))},n.all=function(t){return new n((function(e,n){var o=t.length,r=0,i=[];if(0===t.length)e([]);else for(var u=0;u<t.length;u++)!function(u){function s(t){r++,i[u]=t,r===o&&e(i)}null==t[u]||"object"!=typeof t[u]&&"function"!=typeof t[u]||"function"!=typeof t[u].then?s(t[u]):t[u].then(s,n)}(u)}))},n.race=function(t){return new n((function(e,n){for(var o=0;o<t.length;o++)t[o].then(e,n)}))},t.exports=n}).call(this,n(27).setImmediate)},function(t,e,n){(function(t){var o=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(39),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(18))},function(t,e,n){"use strict";t.exports=n(40)(window)},function(t,e,n){"use strict";t.exports=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var n in t)o(n,t[n]);return e.join("&");function o(t,n){if(Array.isArray(n))for(var r=0;r<n.length;r++)o(t+"["+r+"]",n[r]);else if("[object Object]"===Object.prototype.toString.call(n))for(var r in n)o(t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}}},function(t,e,n){"use strict";t.exports=Object.assign||function(t,e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))}},function(t,e,n){"use strict";t.exports=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var e=t.split("&"),n={},o={},r=0;r<e.length;r++){var i=e[r].split("="),u=decodeURIComponent(i[0]),s=2===i.length?decodeURIComponent(i[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var c=u.split(/\]\[?|\[/),a=o;u.indexOf("[")>-1&&c.pop();for(var l=0;l<c.length;l++){var f=c[l],p=c[l+1],d=""==p||!isNaN(parseInt(p,10));if(""===f)null==n[u=c.slice(0,l).join()]&&(n[u]=Array.isArray(a)?a.length:0),f=n[u]++;else if("__proto__"===f)break;if(l===c.length-1)a[f]=s;else{var h=Object.getOwnPropertyDescriptor(a,f);null!=h&&(h=h.value),null==h&&(a[f]=h=d?[]:{}),a=h}}}return o}},function(t,e,n){},function(t,e){function n(e,o){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,o)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";var o=n(23);o.trust=n(36),o.fragment=n(37),t.exports=o},function(t,e,n){"use strict";var o=n(11);t.exports=function(t){return null==t&&(t=""),o("<",void 0,void 0,t,void 0,void 0)}},function(t,e,n){"use strict";var o=n(11),r=n(24);t.exports=function(){var t=r.apply(0,arguments);return t.tag="[",t.children=o.normalizeChildren(t.children),t}},function(t,e,n){"use strict";var o=n(25),r=n(20);t.exports=n(42)(window,o,r.redraw)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var o,r,i,u,s,c=1,a={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick((function(){h(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){h(t.data)},o=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,o=function(t){var e=f.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):o=function(t){setTimeout(h,0,t)}:(u="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(u)&&h(+e.data.slice(u.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),o=function(e){t.postMessage(u+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return a[c]=r,o(c),c++},p.clearImmediate=d}function d(t){delete a[t]}function h(t){if(l)setTimeout(h,0,t);else{var e=a[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(18),n(19))},function(t,e,n){"use strict";var o=n(11);t.exports=function(t){var e,n=t&&t.document,r={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(t){return t.attrs&&t.attrs.xmlns||r[t.tag]}function u(t,e){if(t.state!==e)throw new Error("`vnode.state` must not be modified")}function s(t){var e=t.state;try{return this.apply(e,arguments)}finally{u(t,e)}}function c(){try{return n.activeElement}catch(t){return null}}function a(t,e,n,o,r,i,u){for(var s=n;s<o;s++){var c=e[s];null!=c&&l(t,c,r,u,i)}}function l(t,e,r,u,c){var f=e.tag;if("string"==typeof f)switch(e.state={},null!=e.attrs&&M(e.attrs,e,r),f){case"#":!function(t,e,o){e.dom=n.createTextNode(e.children),w(t,e.dom,o)}(t,e,c);break;case"<":p(t,e,u,c);break;case"[":!function(t,e,o,r,i){var u=n.createDocumentFragment();if(null!=e.children){var s=e.children;a(u,s,0,s.length,o,null,r)}e.dom=u.firstChild,e.domSize=u.childNodes.length,w(t,u,i)}(t,e,r,u,c);break;default:!function(t,e,r,u,s){var c=e.tag,l=e.attrs,f=l&&l.is,p=(u=i(e)||u)?f?n.createElementNS(u,c,{is:f}):n.createElementNS(u,c):f?n.createElement(c,{is:f}):n.createElement(c);e.dom=p,null!=l&&function(t,e,n){for(var o in e)E(t,o,null,e[o],n)}(e,l,u);if(w(t,p,s),!b(e)&&(null!=e.text&&(""!==e.text?p.textContent=e.text:e.children=[o("#",void 0,void 0,e.text,void 0,void 0)]),null!=e.children)){var d=e.children;a(p,d,0,d.length,r,null,u),"select"===e.tag&&null!=l&&function(t,e){if("value"in e)if(null===e.value)-1!==t.dom.selectedIndex&&(t.dom.value=null);else{var n=""+e.value;t.dom.value===n&&-1!==t.dom.selectedIndex||(t.dom.value=n)}"selectedIndex"in e&&E(t,"selectedIndex",null,e.selectedIndex,void 0)}(e,l)}}(t,e,r,u,c)}else!function(t,e,n,r,i){(function(t,e){var n;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(n=t.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(n=t.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}M(t.state,t,e),null!=t.attrs&&M(t.attrs,t,e);if(t.instance=o.normalize(s.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(e,n),null!=e.instance?(l(t,e.instance,n,r,i),e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0):e.domSize=0}(t,e,r,u,c)}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function p(t,e,o,r){var i=e.children.match(/^\s*?<(\w+)/im)||[],u=n.createElement(f[i[1]]||"div");"http://www.w3.org/2000/svg"===o?(u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",u=u.firstChild):u.innerHTML=e.children,e.dom=u.firstChild,e.domSize=u.childNodes.length,e.instance=[];for(var s,c=n.createDocumentFragment();s=u.firstChild;)e.instance.push(s),c.appendChild(s);w(t,c,r)}function d(t,e,n,o,r,i){if(e!==n&&(null!=e||null!=n))if(null==e||0===e.length)a(t,n,0,n.length,o,r,i);else if(null==n||0===n.length)x(t,e,0,e.length);else{var u=null!=e[0]&&null!=e[0].key,s=null!=n[0]&&null!=n[0].key,c=0,f=0;if(!u)for(;f<e.length&&null==e[f];)f++;if(!s)for(;c<n.length&&null==n[c];)c++;if(null===s&&null==u)return;if(u!==s)x(t,e,f,e.length),a(t,n,c,n.length,o,r,i);else if(s){for(var p,d,w,b,L,P=e.length-1,C=n.length-1;P>=f&&C>=c&&(w=e[P],b=n[C],w.key===b.key);)w!==b&&h(t,w,b,o,r,i),null!=b.dom&&(r=b.dom),P--,C--;for(;P>=f&&C>=c&&(p=e[f],d=n[c],p.key===d.key);)f++,c++,p!==d&&h(t,p,d,o,m(e,f,r),i);for(;P>=f&&C>=c&&c!==C&&p.key===b.key&&w.key===d.key;)g(t,w,L=m(e,f,r)),w!==d&&h(t,w,d,o,L,i),++c<=--C&&g(t,p,r),p!==b&&h(t,p,b,o,r,i),null!=b.dom&&(r=b.dom),f++,w=e[--P],b=n[C],p=e[f],d=n[c];for(;P>=f&&C>=c&&w.key===b.key;)w!==b&&h(t,w,b,o,r,i),null!=b.dom&&(r=b.dom),C--,w=e[--P],b=n[C];if(c>C)x(t,e,f,P+1);else if(f>P)a(t,n,c,C+1,o,r,i);else{var E,O,_=r,R=C-c+1,T=new Array(R),S=0,I=0,j=2147483647,z=0;for(I=0;I<R;I++)T[I]=-1;for(I=C;I>=c;I--){null==E&&(E=v(e,f,P+1));var A=E[(b=n[I]).key];null!=A&&(j=A<j?A:-1,T[I-c]=A,w=e[A],e[A]=null,w!==b&&h(t,w,b,o,r,i),null!=b.dom&&(r=b.dom),z++)}if(r=_,z!==P-f+1&&x(t,e,f,P+1),0===z)a(t,n,c,C+1,o,r,i);else if(-1===j)for(S=(O=function(t){var e=[0],n=0,o=0,r=0,i=y.length=t.length;for(r=0;r<i;r++)y[r]=t[r];for(r=0;r<i;++r)if(-1!==t[r]){var u=e[e.length-1];if(t[u]<t[r])y[r]=u,e.push(r);else{for(n=0,o=e.length-1;n<o;){var s=(n>>>1)+(o>>>1)+(n&o&1);t[e[s]]<t[r]?n=s+1:o=s}t[r]<t[e[n]]&&(n>0&&(y[r]=e[n-1]),e[n]=r)}}n=e.length,o=e[n-1];for(;n-- >0;)e[n]=o,o=y[o];return y.length=0,e}(T)).length-1,I=C;I>=c;I--)d=n[I],-1===T[I-c]?l(t,d,o,i,r):O[S]===I-c?S--:g(t,d,r),null!=d.dom&&(r=n[I].dom);else for(I=C;I>=c;I--)d=n[I],-1===T[I-c]&&l(t,d,o,i,r),null!=d.dom&&(r=n[I].dom)}}else{var M=e.length<n.length?e.length:n.length;for(c=c<f?c:f;c<M;c++)(p=e[c])===(d=n[c])||null==p&&null==d||(null==p?l(t,d,o,i,m(e,c+1,r)):null==d?k(t,p):h(t,p,d,o,m(e,c+1,r),i));e.length>M&&x(t,e,c,e.length),n.length>M&&a(t,n,c,n.length,o,r,i)}}}function h(t,e,n,r,u,c){var a=e.tag;if(a===n.tag){if(n.state=e.state,n.events=e.events,function(t,e){do{var n;if(null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate)if(void 0!==(n=s.call(t.attrs.onbeforeupdate,t,e))&&!n)break;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeupdate)if(void 0!==(n=s.call(t.state.onbeforeupdate,t,e))&&!n)break;return!1}while(0);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}(n,e))return;if("string"==typeof a)switch(null!=n.attrs&&V(n.attrs,n,r),a){case"#":!function(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children);e.dom=t.dom}(e,n);break;case"<":!function(t,e,n,o,r){e.children!==n.children?(L(t,e),p(t,n,o,r)):(n.dom=e.dom,n.domSize=e.domSize,n.instance=e.instance)}(t,e,n,c,u);break;case"[":!function(t,e,n,o,r,i){d(t,e.children,n.children,o,r,i);var u=0,s=n.children;if(n.dom=null,null!=s){for(var c=0;c<s.length;c++){var a=s[c];null!=a&&null!=a.dom&&(null==n.dom&&(n.dom=a.dom),u+=a.domSize||1)}1!==u&&(n.domSize=u)}}(t,e,n,r,u,c);break;default:!function(t,e,n,r){var u=e.dom=t.dom;r=i(e)||r,"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0));(function(t,e,n,o){if(null!=n)for(var r in n)E(t,r,e&&e[r],n[r],o);var i;if(null!=e)for(var r in e)null==(i=e[r])||null!=n&&null!=n[r]||O(t,r,i,o)})(e,t.attrs,e.attrs,r),b(e)||(null!=t.text&&null!=e.text&&""!==e.text?t.text.toString()!==e.text.toString()&&(t.dom.firstChild.nodeValue=e.text):(null!=t.text&&(t.children=[o("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),null!=e.text&&(e.children=[o("#",void 0,void 0,e.text,void 0,void 0)]),d(u,t.children,e.children,n,null,r)))}(e,n,r,c)}else!function(t,e,n,r,i,u){if(n.instance=o.normalize(s.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");V(n.state,n,r),null!=n.attrs&&V(n.attrs,n,r);null!=n.instance?(null==e.instance?l(t,n.instance,r,u,i):h(t,e.instance,n.instance,r,i,u),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=e.instance?(k(t,e.instance),n.dom=void 0,n.domSize=0):(n.dom=e.dom,n.domSize=e.domSize)}(t,e,n,r,u,c)}else k(t,e),l(t,n,r,c,u)}function v(t,e,n){for(var o=Object.create(null);e<n;e++){var r=t[e];if(null!=r){var i=r.key;null!=i&&(o[i]=e)}}return o}var y=[];function m(t,e,n){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return n}function g(t,e,o){var r=n.createDocumentFragment();!function t(e,n,o){for(;null!=o.dom&&o.dom.parentNode===e;){if("string"!=typeof o.tag){if(null!=(o=o.instance))continue}else if("<"===o.tag)for(var r=0;r<o.instance.length;r++)n.appendChild(o.instance[r]);else if("["!==o.tag)n.appendChild(o.dom);else if(1===o.children.length){if(null!=(o=o.children[0]))continue}else for(r=0;r<o.children.length;r++){var i=o.children[r];null!=i&&t(e,n,i)}break}}(t,r,e),w(t,r,o)}function w(t,e,n){null!=n?t.insertBefore(e,n):t.appendChild(e)}function b(t){if(null==t.attrs||null==t.attrs.contenteditable&&null==t.attrs.contentEditable)return!1;var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var n=e[0].children;t.dom.innerHTML!==n&&(t.dom.innerHTML=n)}else if(null!=t.text||null!=e&&0!==e.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function x(t,e,n,o){for(var r=n;r<o;r++){var i=e[r];null!=i&&k(t,i)}}function k(t,e){var n,o,r,i=0,c=e.state;"string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&(null!=(r=s.call(e.state.onbeforeremove,e))&&"function"==typeof r.then&&(i=1,n=r));e.attrs&&"function"==typeof e.attrs.onbeforeremove&&(null!=(r=s.call(e.attrs.onbeforeremove,e))&&"function"==typeof r.then&&(i|=2,o=r));if(u(e,c),i){if(null!=n){var a=function(){1&i&&((i&=2)||l())};n.then(a,a)}if(null!=o){a=function(){2&i&&((i&=1)||l())};o.then(a,a)}}else C(e),P(t,e);function l(){u(e,c),C(e),P(t,e)}}function L(t,e){for(var n=0;n<e.instance.length;n++)t.removeChild(e.instance[n])}function P(t,e){for(;null!=e.dom&&e.dom.parentNode===t;){if("string"!=typeof e.tag){if(null!=(e=e.instance))continue}else if("<"===e.tag)L(t,e);else{if("["!==e.tag&&(t.removeChild(e.dom),!Array.isArray(e.children)))break;if(1===e.children.length){if(null!=(e=e.children[0]))continue}else for(var n=0;n<e.children.length;n++){var o=e.children[n];null!=o&&P(t,o)}}break}}function C(t){if("string"!=typeof t.tag&&"function"==typeof t.state.onremove&&s.call(t.state.onremove,t),t.attrs&&"function"==typeof t.attrs.onremove&&s.call(t.attrs.onremove,t),"string"!=typeof t.tag)null!=t.instance&&C(t.instance);else{var e=t.children;if(Array.isArray(e))for(var n=0;n<e.length;n++){var o=e[n];null!=o&&C(o)}}}function E(t,e,o,r,i){if("key"!==e&&"is"!==e&&null!=r&&!_(e)&&(o!==r||function(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===c()||"option"===t.tag&&t.dom.parentNode===n.activeElement}(t,e)||"object"==typeof r)){if("o"===e[0]&&"n"===e[1])return A(t,e,r);if("xlink:"===e.slice(0,6))t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),r);else if("style"===e)j(t.dom,o,r);else if(R(t,e,i)){if("value"===e){if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===""+r&&t.dom===c())return;if("select"===t.tag&&null!==o&&t.dom.value===""+r)return;if("option"===t.tag&&null!==o&&t.dom.value===""+r)return}"input"===t.tag&&"type"===e?t.dom.setAttribute(e,r):t.dom[e]=r}else"boolean"==typeof r?r?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute("className"===e?"class":e,r)}}function O(t,e,n,o){if("key"!==e&&"is"!==e&&null!=n&&!_(e))if("o"!==e[0]||"n"!==e[1]||_(e))if("style"===e)j(t.dom,n,null);else if(!R(t,e,o)||"className"===e||"value"===e&&("option"===t.tag||"select"===t.tag&&-1===t.dom.selectedIndex&&t.dom===c())||"input"===t.tag&&"type"===e){var r=e.indexOf(":");-1!==r&&(e=e.slice(r+1)),!1!==n&&t.dom.removeAttribute("className"===e?"class":e)}else t.dom[e]=null;else A(t,e,void 0)}function _(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function R(t,e,n){return void 0===n&&(t.tag.indexOf("-")>-1||null!=t.attrs&&t.attrs.is||"href"!==e&&"list"!==e&&"form"!==e&&"width"!==e&&"height"!==e)&&e in t.dom}var T=/[A-Z]/g;function S(t){return"-"+t.toLowerCase()}function I(t){return"-"===t[0]&&"-"===t[1]?t:"cssFloat"===t?"float":t.replace(T,S)}function j(t,e,n){if(e===n);else if(null==n)t.style.cssText="";else if("object"!=typeof n)t.style.cssText=n;else if(null==e||"object"!=typeof e)for(var o in t.style.cssText="",n){null!=(r=n[o])&&t.style.setProperty(I(o),String(r))}else{for(var o in n){var r;null!=(r=n[o])&&(r=String(r))!==String(e[o])&&t.style.setProperty(I(o),r)}for(var o in e)null!=e[o]&&null==n[o]&&t.style.removeProperty(I(o))}}function z(){this._=e}function A(t,e,n){if(null!=t.events){if(t.events[e]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=t.events[e]&&t.dom.removeEventListener(e.slice(2),t.events,!1),t.events[e]=void 0):(null==t.events[e]&&t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(t.events=new z,t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=n)}function M(t,e,n){"function"==typeof t.oninit&&s.call(t.oninit,e),"function"==typeof t.oncreate&&n.push(s.bind(t.oncreate,e))}function V(t,e,n){"function"==typeof t.onupdate&&n.push(s.bind(t.onupdate,e))}return z.prototype=Object.create(null),z.prototype.handleEvent=function(t){var e,n=this["on"+t.type];"function"==typeof n?e=n.call(t.currentTarget,t):"function"==typeof n.handleEvent&&n.handleEvent(t),this._&&!1!==t.redraw&&(0,this._)(),!1===e&&(t.preventDefault(),t.stopPropagation())},function(t,n,r){if(!t)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],u=c(),s=t.namespaceURI;null==t.vnodes&&(t.textContent=""),n=o.normalizeChildren(Array.isArray(n)?n:[n]);var a=e;try{e="function"==typeof r?r:void 0,d(t,t.vnodes,n,i,null,"http://www.w3.org/1999/xhtml"===s?void 0:s)}finally{e=a}t.vnodes=n,null!=u&&c()!==u&&"function"==typeof u.focus&&u.focus();for(var l=0;l<i.length;l++)i[l]()}}},function(t,e,n){"use strict";var o=n(11);t.exports=function(t,e,n){var r=[],i=!1,u=!1;function s(){if(i)throw new Error("Nested m.redraw.sync() call");i=!0;for(var e=0;e<r.length;e+=2)try{t(r[e],o(r[e+1]),c)}catch(t){n.error(t)}i=!1}function c(){u||(u=!0,e((function(){u=!1,s()})))}return c.sync=s,{mount:function(e,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var i=r.indexOf(e);i>=0&&(r.splice(i,2),t(e,[],c)),null!=n&&(r.push(e,n),t(e,o(n),c))},redraw:c}}},function(t,e,n){"use strict";var o=n(21);t.exports=function(t,e,n){var r=0;function i(t){return new e(t)}function u(t){return function(r,u){"string"!=typeof r?(u=r,r=r.url):null==u&&(u={});var s=new e((function(e,n){t(o(r,u.params),u,(function(t){if("function"==typeof u.type)if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=new u.type(t[n]);else t=new u.type(t);e(t)}),n)}));if(!0===u.background)return s;var c=0;function a(){0==--c&&"function"==typeof n&&n()}return function t(e){var n=e.then;return e.constructor=i,e.then=function(){c++;var o=n.apply(e,arguments);return o.then(a,(function(t){if(a(),0===c)throw t})),t(o)},e}(s)}}function s(t,e){for(var n in t.headers)if({}.hasOwnProperty.call(t.headers,n)&&e.test(n))return!0;return!1}return i.prototype=e.prototype,i.__proto__=e,{request:u((function(e,n,o,r){var i,u=null!=n.method?n.method.toUpperCase():"GET",c=n.body,a=!(null!=n.serialize&&n.serialize!==JSON.serialize||c instanceof t.FormData),l=n.responseType||("function"==typeof n.extract?"":"json"),f=new t.XMLHttpRequest,p=!1,d=f,h=f.abort;for(var v in f.abort=function(){p=!0,h.call(this)},f.open(u,e,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),a&&null!=c&&!s(n,/^content-type$/i)&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||s(n,/^accept$/i)||f.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(f.withCredentials=n.withCredentials),n.timeout&&(f.timeout=n.timeout),f.responseType=l,n.headers)({}).hasOwnProperty.call(n.headers,v)&&f.setRequestHeader(v,n.headers[v]);f.onreadystatechange=function(t){if(!p&&4===t.target.readyState)try{var i,u=t.target.status>=200&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(e),s=t.target.response;if("json"===l?t.target.responseType||"function"==typeof n.extract||(s=JSON.parse(t.target.responseText)):l&&"text"!==l||null==s&&(s=t.target.responseText),"function"==typeof n.extract?(s=n.extract(t.target,n),u=!0):"function"==typeof n.deserialize&&(s=n.deserialize(s)),u)o(s);else{try{i=t.target.responseText}catch(t){i=s}var c=new Error(i);c.code=t.target.status,c.response=s,r(c)}}catch(t){r(t)}},"function"==typeof n.config&&(f=n.config(f,n,e)||f)!==d&&(i=f.abort,f.abort=function(){p=!0,i.call(this)}),null==c?f.send():"function"==typeof n.serialize?f.send(n.serialize(c)):c instanceof t.FormData?f.send(c):f.send(JSON.stringify(c))})),jsonp:u((function(e,n,o,i){var u=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+r++,s=t.document.createElement("script");t[u]=function(e){delete t[u],s.parentNode.removeChild(s),o(e)},s.onerror=function(){delete t[u],s.parentNode.removeChild(s),i(new Error("JSONP request failed"))},s.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(u),t.document.documentElement.appendChild(s)}))}}},function(t,e,n){"use strict";var o=n(20);t.exports=n(44)(window,o)},function(t,e,n){"use strict";(function(e){var o=n(11),r=n(23),i=n(25),u=n(21),s=n(22),c=n(45),a=n(30),l={};t.exports=function(t,n){var f;function p(e,n,o){if(e=u(e,n),null!=f){f();var r=o?o.state:null,i=o?o.title:null;o&&o.replace?t.history.replaceState(r,i,w.prefix+e):t.history.pushState(r,i,w.prefix+e)}else t.location.href=w.prefix+e}var d,h,v,y,m=l,g=w.SKIP={};function w(r,u,b){if(null==r)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var x,k=0,L=Object.keys(b).map((function(t){if("/"!==t[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:t,component:b[t],check:c(t)}})),P="function"==typeof e?e:setTimeout,C=i.resolve(),E=!1;if(f=null,null!=u){var O=s(u);if(!L.some((function(t){return t.check(O)})))throw new ReferenceError("Default route doesn't match any known routes")}function _(){E=!1;var e=t.location.hash;"#"!==w.prefix[0]&&(e=t.location.search+e,"?"!==w.prefix[0]&&"/"!==(e=t.location.pathname+e)[0]&&(e="/"+e));var o=e.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(w.prefix.length),r=s(o);function i(){if(o===u)throw new Error("Could not resolve default route "+u);p(u,null,{replace:!0})}a(r.params,t.history.state),function t(e){for(;e<L.length;e++)if(L[e].check(r)){var u=L[e].component,s=L[e].route,c=u,a=y=function(i){if(a===y){if(i===g)return t(e+1);d=null==i||"function"!=typeof i.view&&"function"!=typeof i?"div":i,h=r.params,v=o,y=null,m=u.render?u:null,2===k?n.redraw():(k=2,n.redraw.sync())}};return void(u.view||"function"==typeof u?(u={},a(c)):u.onmatch?C.then((function(){return u.onmatch(r.params,o,s)})).then(a,i):a("div"))}i()}(0)}return f=function(){E||(E=!0,P(_))},"function"==typeof t.history.pushState?(x=function(){t.removeEventListener("popstate",f,!1)},t.addEventListener("popstate",f,!1)):"#"===w.prefix[0]&&(f=null,x=function(){t.removeEventListener("hashchange",_,!1)},t.addEventListener("hashchange",_,!1)),n.mount(r,{onbeforeupdate:function(){return!(!(k=k?2:1)||l===m)},oncreate:_,onremove:x,view:function(){if(k&&l!==m){var t=[o(d,h.key,h)];return m&&(t=m.render(t[0])),t}}})}return w.set=function(t,e,n){null!=y&&((n=n||{}).replace=!0),y=null,p(t,e,n)},w.get=function(){return v},w.prefix="#!",w.Link={view:function(t){var e,n,o=t.attrs.options,i={};a(i,t.attrs),i.selector=i.options=i.key=i.oninit=i.oncreate=i.onbeforeupdate=i.onupdate=i.onbeforeremove=i.onremove=null;var u=r(t.attrs.selector||"a",i,t.children);return(u.attrs.disabled=Boolean(u.attrs.disabled))?(u.attrs.href=null,u.attrs["aria-disabled"]="true",u.attrs.onclick=null):(e=u.attrs.onclick,n=u.attrs.href,u.attrs.href=w.prefix+n,u.attrs.onclick=function(t){var r;"function"==typeof e?r=e.call(t.currentTarget,t):null==e||"object"!=typeof e||"function"==typeof e.handleEvent&&e.handleEvent(t),!1===r||t.defaultPrevented||0!==t.button&&0!==t.which&&1!==t.which||t.currentTarget.target&&"_self"!==t.currentTarget.target||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(t.preventDefault(),t.redraw=!1,w.set(n,null,o))}),u}},w.param=function(t){return h&&null!=t?h[t]:h},w}}).call(this,n(27).setImmediate)},function(t,e,n){"use strict";var o=n(22);t.exports=function(t){var e=o(t),n=Object.keys(e.params),r=[],i=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(t,e,n){return null==e?"\\"+t:(r.push({k:e,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))}))+"$");return function(t){for(var o=0;o<n.length;o++)if(e.params[n[o]]!==t.params[n[o]])return!1;if(!r.length)return i.test(t.path);var u=i.exec(t.path);if(null==u)return!1;for(o=0;o<r.length;o++)t.params[r[o].k]=r[o].r?u[o+1]:decodeURIComponent(u[o+1]);return!0}}},function(t,e,n){var o=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}},,,,function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"components_getValue",(function(){return M})),n.d(o,"components_setValue",(function(){return V})),n.d(o,"components_add",(function(){return N})),n.d(o,"components_watch",(function(){return D})),n.d(o,"components_ticker",(function(){return F})),n.d(o,"components_branch",(function(){return $})),n.d(o,"components_box",(function(){return H})),n.d(o,"components_button",(function(){return q}));var r={};n.r(r),n.d(r,"components_getValue",(function(){return it})),n.d(r,"components_setValue",(function(){return ut})),n.d(r,"components_add",(function(){return st})),n.d(r,"components_watch",(function(){return ct})),n.d(r,"components_ticker",(function(){return at})),n.d(r,"components_branch",(function(){return lt})),n.d(r,"components_box",(function(){return ft})),n.d(r,"components_button",(function(){return pt}));n(32);var i=n(0),u=n.n(i),s=n(1),c=n.n(s),a=n(9),l=n.n(a),f=n(5),p=n.n(f),d=n(8),h=n.n(d),v=n(4),y=n.n(v),m=n(2),g=n(7),w=n(3),b=n.n(w),x=function(){function t(){u()(this,t),this._id=g.a.guid(),this.self=this,this.redraw=!0}return c()(t,[{key:"onbeforeupdate",value:function(t,e){return void 0!==t.attrs.redraw&&(this.self.redraw=t.attrs.redraw),this.self.redraw}},{key:"onupdate",value:function(t){this.self.redraw=!1}},{key:"view",value:function(){}},{key:"id",get:function(){return this._id}}]),t}();function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var L=function(t){p()(n,t);var e=k(n);function n(){var t;return u()(this,n),(t=e.call(this))._active=!1,t._activeTime=-1,t._select=!1,t._hover=!1,t._dragHover=!1,t}return c()(n,[{key:"onExecute",value:function(t){this._activeTime>=0&&(t-this._activeTime<500?this._active||(this._active=!0,this.redraw=!0,b.a.redraw()):this._active&&(this._active=!1,this.redraw=!0,b.a.redraw()))}}]),n}(x),P=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.forEach((function(e){var n=Object.keys(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{});Object.getOwnPropertySymbols(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);o.enumerable&&(n[t]=o)})),Object.defineProperties(t,n,{writable:!0})})),t};function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var E=function(){function t(e){u()(this,t),this.properties={},P(this.properties,null!=e?e:{})}return c()(t,[{key:"connect",value:function(t,e,n,o){this.output={component:t,num:e},this.input={component:n,num:o},this.type=t.outputList[e].type}}]),t}(),O=function(t){p()(n,t);var e=C(n);function n(){var t;return u()(this,n),(t=e.call(this)).root=null,t._type="",t._startPos=[0,0],t._endPos=[0,0],t}return c()(n,[{key:"connect",value:function(t,e,n,o){t.addOutputLine(e,this),n.addInputLine(o,this),this.code=new E({graph:this}),this.code.connect(t.code,e,n.code,o),this._type=this.code.type}},{key:"view",value:function(){return b()("path.line",{class:"".concat(this.self._type," ").concat(this.self._active?"active":""),d:this.getLinePath(this.self._startPos,this.self._endPos)})}},{key:"getLinePath",value:function(t,e){var n=m.a.mul(m.a.sub(e,t),[1,.05]);return n[0]=g.a.clamp(Math.abs(n[0]),40,150),"M ".concat(t," C ").concat(m.a.add(t,n)," ").concat(m.a.add(e,m.a.scale(n,-1))," ").concat(e)}},{key:"startPos",get:function(){return this._startPos},set:function(t){m.b.set.apply(m.b,[this._startPos].concat(l()(t))),this.redraw=!0,b.a.redraw()}},{key:"endPos",get:function(){return this._endPos},set:function(t){m.b.set.apply(m.b,[this._endPos].concat(l()(t))),this.redraw=!0,b.a.redraw()}}]),n}(L),_=n(10),R=n.n(_),T=n(13),S=n.n(T),I=function(){function t(){u()(this,t),this.listenerList={}}return c()(t,[{key:"on",value:function(t,e){var n;t&&e&&(this.listenerList[t]=null!==(n=this.listenerList[t])&&void 0!==n?n:[],this.listenerList[t].push(e))}},{key:"off",value:function(t,e){t&&this.listenerList[t]&&(e&&this.listenerList[t].length>1?this.listenerList[t]=this.listenerList[t].filter((function(t){return t!==e})):delete this.listenerList[t])}},{key:"fire",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(this.listenerList[t])return this.listenerList[t].map((function(t){return t.apply(void 0,n)}))}},{key:"get",value:function(t,e){for(var n=this,o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return new Promise((function(o,i){var u;n.listenerList[t]&&(u=n.listenerList[t])[null!=e?e:0].apply(u,[o,i].concat(r))}))}},{key:"has",value:function(t){return!!this.listenerList[t]}},{key:"once",value:function(t,e){if(e){var n=this;this.on(t,(function o(){e.call.apply(e,[n].concat(Array.prototype.slice.call(arguments))),n.off(t,o)}))}}}]),t}();function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var z=function(t){p()(n,t);var e=j(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u()(this,n),(t=e.call(this)).properties={},P(t.properties,o),t.type="",t.root=null,t.inputList=[],t.outputList=[],t.outputsComplete=!1,t}return c()(n,[{key:"init",value:function(t){var e=this;this.root=t,this.on("action",(function(){e.resetOutputs(),e.nextFlow(!0)}))}},{key:"addInput",value:function(t,e){this.inputList.push({name:t,type:e,connectList:[],data:void 0})}},{key:"addOutput",value:function(t,e){this.outputList.push({name:t,type:e,connectList:[],data:{bool:!1,value:void 0}})}},{key:"removeInputConnect",value:function(t){var e=this;this.resetOutputs();var n=this.inputList[t];n.connectList.forEach((function(o){var r=o.component.outputList[o.num];r.connectList=r.connectList.filter((function(n){return n.component!=e||n.num!=t})),n.data=null})),n.connectList=[],this.root.connectList=this.root.connectList.filter((function(n){return n.input.component!=e||n.input.num!=t}))}},{key:"getInputValue",value:function(t){var e,n;return null===(e=this.inputList[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.value}},{key:"getOutputValue",value:function(t){var e,n;return null===(e=this.outputList[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.value}},{key:"getInputBool",value:function(t){var e,n;return null===(e=this.inputList[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.bool}},{key:"getOutputBool",value:function(t){var e,n;return null===(e=this.outputList[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.bool}},{key:"setOutputValue",value:function(t,e){var n,o=null===(n=this.outputList[t])||void 0===n?void 0:n.data;if(o){var r=[e,!0];o.value=r[0],o.bool=r[1]}}},{key:"trigger",value:function(t){var e=this,n=this.outputList[t];"Exec"==n.type&&(this.fire("trigger",t,n),n.connectList.forEach((function(n){n.component.fire("action",n.num,{component:e,num:t})})))}},{key:"getOutputComponent",value:function(){return new Set(this.outputList.flatMap((function(t){return t.connectList.map((function(t){return t.component}))})))}},{key:"resetOutputs",value:function(){this.outputsComplete=!1,this.outputList.forEach((function(t){t.data.bool&&(t.data.bool=!1,t.data.value=void 0)})),this.getOutputComponent().forEach((function(t){"flow"!=t.type&&t.resetOutputs()}))}},{key:"calcOutputs",value:function(t){}},{key:"nextFlow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.outputsComplete&&(t||"flow"!=this.type)){var e,n=this.inputList.map((function(t){var e;return null==t||null===(e=t.data)||void 0===e?void 0:e.value})),o=null===(e=this.calcOutputs(n))||void 0===e||e;o&&(this.outputsComplete=!0,this.fire("outputsComplete"),this.getOutputComponent().forEach((function(t){t.nextFlow()})))}}},{key:"onExecute",value:function(){}}]),n}(I);function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var M=function(t){p()(n,t);var e=A(n);function n(t){return u()(this,n),t=P({title:"getValue"},t),e.call(this,t)}return c()(n,[{key:"init",value:function(t){R()(y()(n.prototype),"init",this).call(this,t);var e=this;P(this.properties,{get value(){return t.getValue(e.properties.refIndex)},set value(n){t.setValue(e.properties.refIndex,n)}});var o=t.valueList[this.properties.refIndex];o.list.push(this),this.addOutput("val",o.type)}},{key:"calcOutputs",value:function(t){this.setOutputValue(0,this.properties.value)}}]),n}(z),V=function(t){p()(n,t);var e=A(n);function n(t){var o;return u()(this,n),t=P({title:"setValue"},t),(o=e.call(this,t)).type="flow",o}return c()(n,[{key:"init",value:function(t){var e,o=this;R()(y()(n.prototype),"init",this).call(this,t),this.properties.value=null!==(e=this.properties.value)&&void 0!==e?e:t.getValue(this.properties.refIndex),this.addInput("in0","Exec"),this.addInput("in1","Number"),this.addOutput("out0","Exec"),this.on("action",(function(){var e;t.setValue(o.properties.refIndex,null!==(e=o.getInputValue(1))&&void 0!==e?e:o.properties.value),o.trigger(0)}))}}]),n}(z),N=function(t){p()(n,t);var e=A(n);function n(t){return u()(this,n),t=P({title:"add"},t),e.call(this,t)}return c()(n,[{key:"init",value:function(t){R()(y()(n.prototype),"init",this).call(this,t),this.addInput("num0","Number"),this.addInput("num1","Number"),this.addOutput("sum","Number")}},{key:"calcOutputs",value:function(t){if(void 0===t[0]||void 0===t[1])return!1;this.setOutputValue(0,t[0]+t[1])}}]),n}(z),D=function(t){p()(n,t);var e=A(n);function n(t){return u()(this,n),t=P({title:"watch"},t),e.call(this,t)}return c()(n,[{key:"init",value:function(t){R()(y()(n.prototype),"init",this).call(this,t),this.addInput("val","Number")}},{key:"calcOutputs",value:function(t){}}]),n}(z),F=function(t){p()(n,t);var e=A(n);function n(t){var o;return u()(this,n),t=P({title:"ticker"},t),(o=e.call(this,t)).type="flow",o}return c()(n,[{key:"init",value:function(t){var e=this;R()(y()(n.prototype),"init",this).call(this,t),this.addOutput("out0","Exec"),setInterval((function(){e.trigger(0)}),1e3)}}]),n}(z),$=function(t){p()(n,t);var e=A(n);function n(t){var o;return u()(this,n),t=P({title:"branch"},t),(o=e.call(this,t)).type="flow",o}return c()(n,[{key:"calcOutputs",value:function(t){if(void 0===t[1])return!1;this.setOutputValue(2,t[1]?1:0)}},{key:"init",value:function(t){var e=this;R()(y()(n.prototype),"init",this).call(this,t),this.addInput("in0","Exec"),this.addInput("bool","Boolean"),this.addOutput("true","Exec"),this.addOutput("false","Exec"),this.addOutput("out","Number"),this.on("action",(function(t,n){e.getInputBool(1)&&e.trigger(e.getInputValue(1)?0:1)}))}}]),n}(z),H=function(t){p()(n,t);var e=A(n);function n(t){var o;return u()(this,n),t=P({title:"box"},t),(o=e.call(this,t)).type="flow",o}return c()(n,[{key:"init",value:function(t){var e=this;R()(y()(n.prototype),"init",this).call(this,t),this.addInput("in","Exec"),this.addOutput("out","Exec"),this.on("action",(function(t,n){e.trigger(0)}))}}]),n}(z),q=function(t){p()(n,t);var e=A(n);function n(t){var o;return u()(this,n),t=P({title:"button"},t),(o=e.call(this,t)).type="flow",o}return c()(n,[{key:"init",value:function(t){R()(y()(n.prototype),"init",this).call(this,t),this.addOutput("out0","Exec")}}]),n}(z),U=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var B=function(t){return[t.offsetLeft,t.offsetTop]},X=function(t){return[t.offsetWidth,t.offsetHeight]},K=function(t){p()(n,t);var e=G(n);function n(t){var o;return u()(this,n),o=e.call(this),t&&o.init(t),o}return c()(n,[{key:"init",value:function(t){var e=this;this.element=t;var n=[0,0],o=function(t){t.register=e;var o=t.touches?t.touches[0]:t;m.b.set(n,o.pageX,o.pageY),t.mousePos=n,e.fire("press",t)},r=function(t){t.register=e;var o=t.touches?t.touches[0]:t,r=[0,0];m.b.set(r,o.pageX,o.pageY);var i=m.a.sub(r,n);m.b.set.apply(m.b,[n].concat(r)),t.mousePos=n,t.movePos=i,e.fire("move",t)},i=function(t){t.register=e;var o=t.touches?t.touches[0]:t;o&&m.b.set(n,o.pageX,o.pageY),t.mousePos=n,e.fire("release",t)};U()?(this.element.addEventListener("touchstart",o),this.element.addEventListener("touchmove",r),this.element.addEventListener("touchend",i)):(this.element.addEventListener("mousedown",o),this.element.addEventListener("mousemove",r),this.element.addEventListener("mouseup",i))}}]),n}(I);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var J=function t(e,n){if(e){var o=!0;n(e,{stopPropagation:function(){o=!1}}),o&&t(e.parent,n)}},Q=function(t,e){if(e&&W(t,e.collisionGraph)){for(var n=0;n<e.children.length;n++){var o=e.children[n],r=Q(t,o);if(r)return r}return e}},W=function(t,e){if("rect"==e.type)return n=t,o=e.pos,r=e.size,n[0]<=o[0]+r[0]&&o[0]<=n[0]&&n[1]<=o[1]+r[1]&&o[1]<=n[1];var n,o,r},Z=function(t){p()(n,t);var e=Y(n);function n(t){var o;return u()(this,n),(o=e.call(this)).id=null!=t?t:g.a.guid(),o.parent=null,o.collisionGraph=null,o.children=[],o.src=null,o}return c()(n,[{key:"setCollisionGraph",value:function(t){this.collisionGraph=t}},{key:"add",value:function(t){t.parent=this,this.children.push(t)}},{key:"pointDeepHitTest",value:function(t){return Q(t,this)}},{key:"setTop",value:function(t){!function(t,e){var n=function(t,e){var n,o;return(null==e||null===(n=e.src)||void 0===n?void 0:n.zindex)-(null==t||null===(o=t.src)||void 0===o?void 0:o.zindex)},o=t.filter((function(t){return!e.find((function(e){return t.id===e.id}))}));e.sort(n),o.sort(n),[].concat(l()(e),l()(o)).forEach((function(t,e,n){t.src&&(t.src.zindex=n.length-e)})),t.sort(n)}(this.children,t)}},{key:"bubbleFire",value:function(t,e){for(var n,o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];e=null!==(n=e)&&void 0!==n?n:{},J(this,(function(n,o){P(e,{stopPropagation:o.stopPropagation}),n.fire.apply(n,[t,e].concat(r))}))}}]),n}(I);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var et=function(t){p()(n,t);var e=tt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"view",value:function(t){return b()("div",{class:t.attrs.class},t.attrs._list.map((function(e,n){return b()("div",{class:"item ".concat(t.attrs._list[n].type)},[b()("div",{class:"point"}),b()("div",{class:"text",textContent:t.attrs._list[n].name})])})))}}]),n}(x),nt=function(t){p()(n,t);var e=tt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"view",value:function(t){return t.attrs._vnodeList.map((function(t){return b()(t)}))}}]),n}(x),ot=function(t){p()(n,t);var e=tt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u()(this,n),(t=e.call(this)).inputLineList=[],t.outputLineList=[],t.putsRedraw=!1,t.slots=[],t.slotsRedraw=!1,t.style={pos:[0,0],size:[void 0,void 0],zindex:void 0},P(t.style,i),P(r,{graph:S()(t)}),t.control=null,t.setCode(new(o["components_".concat(r.componentName)])(r)),t}return c()(n,[{key:"oncreate",value:function(t){var e,n,o=X(t.dom);o[0]=null!==(e=this.self.style.size[0])&&void 0!==e?e:o[0],o[1]=null!==(n=this.self.style.size[1])&&void 0!==n?n:o[1],this.self.element=t.dom,this.self.size=o}},{key:"init",value:function(t){this.root=t,this.root.code.add(this.code),this.zindex=this.root.code.list.length,this.control=this.createControl(),this.control&&this.root.addControl(this.control)}},{key:"createControl",value:function(){var t=this,e=new Z;e.setCollisionGraph({type:"rect",pos:this.pos,size:this.size}),e.src=this,e.on("start",(function(e){t.root.setOperate("selectActive"),e.stopPropagation()})),e.on("drag",(function(e){"selectActive"==t.root.operate&&t.select&&(t.pos=m.a.add(t.pos,e.movePos)),e.stopPropagation()})),e.on("end",(function(t){})),e.on("select",(function(e){t.select=!0})),e.on("unselect",(function(e){t.select=!1})),e.on("enter",(function(e){t.hover=!0})),e.on("leave",(function(e){t.hover=!1}));var n=this;return this.code.inputList.forEach((function(o,r){var i=new Z;i.setCollisionGraph({type:"rect",get pos(){return m.a.sub(n.getInputPos(r),[5,5])},get size(){return[10,10]}}),i.on("start",(function(t){t.stopPropagation()})),i.on("release",(function(e){if("connectLine"==t.root.operate){if(n.root.connectLine.input&&n.root.connectLine.output){var o=n.root.connectLine.input,r=n.root.connectLine.output,i=n.root.connect(r.component,r.num,o.component,o.num);i&&(i.startPos=r.component.getOutputPos(r.num),i.endPos=o.component.getInputPos(o.num))}n.root.connectLine={},e.stopPropagation(),t.root.setOperate("")}})),i.on("dragEnter",(function(e){"connectLine"==t.root.operate&&(console.log("拖曳滑入"),n.root.connectLine.input={component:n,num:r})})),i.on("end",(function(e){t.removeInputConnect(r),e.stopPropagation()})),e.add(i)})),this.code.outputList.forEach((function(o,r){var i=new Z;i.setCollisionGraph({type:"rect",get pos(){return m.a.sub(n.getOutputPos(r),[5,5])},get size(){return[10,10]}}),i.on("start",(function(e){t.root.setOperate("connectLine"),t.root.graphLine.startPos=n.getOutputPos(r),t.root.graphLine.endPos=e.mousePos,n.root.connectLine={},e.stopPropagation()})),i.on("drag",(function(e){"connectLine"==t.root.operate&&(t.root.graphLine.endPos=e.mousePos,e.stopPropagation())})),i.on("dragLeave",(function(e){"connectLine"==t.root.operate&&(console.log("拖曳滑出"),n.root.connectLine.output={component:n,num:r})})),e.add(i)})),e}},{key:"setCode",value:function(t){var e=this;this.code=t,this.code.on("trigger",(function(t,n){e._activeTime=e.root.time,e.outputLineList[t]&&e.outputLineList[t].forEach((function(t){t._activeTime=e.root.time}))})),this.code.on("action",(function(t,n){e._activeTime=e.root.time,e.update()})),this.code.on("outputsComplete",(function(t,n){e.slots.length&&(e.slotsRedraw=!0),e.update()}))}},{key:"calcStyleValue",value:function(t){return"number"==typeof t?t+"px":null!=t?t:""}},{key:"calcStyle",value:function(){return{left:this.calcStyleValue(this.style.pos[0]),top:this.calcStyleValue(this.style.pos[1]),zIndex:this.style.zindex,width:this.calcStyleValue(this.style.size[0]),height:this.calcStyleValue(this.style.size[1])}}},{key:"view",value:function(t){return b()("div.flowGraph",{key:this._id,class:"flow_".concat(this.code.properties.componentName," \n        ").concat(this.self._active?"active":""," ").concat(this.self._select?"select":""," ").concat(this.self._hover?"hover":""),style:this.self.calcStyle()},[b()("div.title",{textContent:this.code.properties.title}),b()("div.wrap",[b()("div.content",[b()(et,{class:"inputs",_list:this.code.inputList,redraw:this.self.putsRedraw}),b()("div.slotContent",b()(nt,{_vnodeList:this.self.slots,redraw:this.self.slotsRedraw})),b()(et,{class:"outputs",_list:this.code.outputList,redraw:this.self.putsRedraw})])])])}},{key:"getInputPos",value:function(t){return m.a.add(this.style.pos,[10,30+25*(t+.5)])}},{key:"getOutputPos",value:function(t){return m.a.add(this.style.pos,[this.style.size[0]-10,30+25*(t+.5)])}},{key:"addInputLine",value:function(t,e){this.inputLineList[t]||(this.inputLineList[t]=[]),this.inputLineList[t].push(e)}},{key:"addOutputLine",value:function(t,e){this.outputLineList[t]||(this.outputLineList[t]=[]),this.outputLineList[t].push(e)}},{key:"removeInputConnect",value:function(t){this.code.removeInputConnect(t),this.inputLineList[t].forEach((function(t){var e=t,n=t.code.output.num,o=t.code.output.component.properties.graph;o.outputLineList[n]=o.outputLineList[n].filter((function(t){return e!=t}))})),this.inputLineList[t]=[],b.a.redraw()}},{key:"updateLine",value:function(){var t=this;this.inputLineList.forEach((function(e,n){e&&e.forEach((function(e){e.endPos=t.getInputPos(n)}))})),this.outputLineList.forEach((function(e,n){e&&e.forEach((function(e){e.startPos=t.getOutputPos(n)}))}))}},{key:"update",value:function(){this.redraw=!0,this.code.getOutputComponent().forEach((function(t){"flow"!=t.type&&t.properties.graph.update()}))}},{key:"zindex",get:function(){return this.style.zindex},set:function(t){this.style.zindex=t,this.redraw=!0,b.a.redraw()}},{key:"pos",get:function(){return this.style.pos},set:function(t){this.style.pos[0]===t[0]&&this.style.pos[1]===t[1]||(m.b.set.apply(m.b,[this.style.pos].concat(l()(t))),this.redraw=!0,b.a.redraw(),this.updateLine())}},{key:"size",get:function(){return this.style.size},set:function(t){this.style.size[0]===t[0]&&this.style.size[1]===t[1]||(m.b.set.apply(m.b,[this.style.size].concat(l()(t))),this.redraw=!0,b.a.redraw(),this.updateLine())}},{key:"select",get:function(){return this._select},set:function(t){this._select!==t&&(this._select=t,this.redraw=!0,b.a.redraw())}},{key:"hover",get:function(){return this._hover},set:function(t){this._hover!==t&&(this._hover=t,this.redraw=!0,b.a.redraw())}},{key:"dragHover",get:function(){return this._dragHover},set:function(t){this._dragHover!==t&&(this._dragHover=t)}}]),n}(L);function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var it=function(t){p()(n,t);var e=rt(n);function n(t,o){return u()(this,n),e.call(this,t,o)}return c()(n,[{key:"setCode",value:function(t){var e=this;R()(y()(n.prototype),"setCode",this).call(this,t),this.slotsRedraw=!0;var o={onupdate:function(){e.slotsRedraw=!1},view:function(t){return b()("div.refvalue",[b()("div.index","變數 ".concat(e.code.properties.refIndex)),b()("input.inputText",{type:"text",value:e.code.properties.value,onmousedown:function(t){t.stopPropagation()},oninput:function(t){var n=t.currentTarget.value;""!==n&&(e.code.properties.value=parseFloat(n))},onblur:function(t){""===t.currentTarget.value&&(t.currentTarget.value=e.code.properties.value)}})])}};this.slots.push(o)}}]),n}(ot),ut=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"setCode",value:function(t){var e=this;R()(y()(n.prototype),"setCode",this).call(this,t),this.slotsRedraw=!0;var o={onupdate:function(){e.slotsRedraw=!1},view:function(t){return b()("div.refvalue",[b()("div.index","變數 ".concat(e.code.properties.refIndex)),b()("input.inputText",{type:"text",value:e.code.properties.value,onmousedown:function(t){t.stopPropagation()},oninput:function(t){var n=t.currentTarget.value;""!==n&&(e.code.properties.value=parseFloat(n))},onblur:function(t){""===t.currentTarget.value&&(t.currentTarget.value=e.code.properties.value)}})])}};this.slots.push(o),this.code.on("action",(function(){e.code.root.valueList[e.code.properties.refIndex].list.forEach((function(t){t.properties.graph.update()}))}))}}]),n}(ot),st=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(ot),ct=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"setCode",value:function(t){var e=this;R()(y()(n.prototype),"setCode",this).call(this,t),this.slotsRedraw=!0;var o={onupdate:function(){e.slotsRedraw=!1},view:function(t){return b()("div.text",{textContent:e.code.getInputValue(0)})}};this.slots.push(o)}},{key:"onExecute",value:function(t){R()(y()(n.prototype),"onExecute",this).call(this,t)}}]),n}(ot),at=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(ot),lt=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"onExecute",value:function(t){R()(y()(n.prototype),"onExecute",this).call(this,t)}},{key:"setCode",value:function(t){R()(y()(n.prototype),"setCode",this).call(this,t),this.code.on("action",(function(t,e){}))}}]),n}(ot),ft=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(ot),pt=function(t){p()(n,t);var e=rt(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"setCode",value:function(t){var e=this;R()(y()(n.prototype),"setCode",this).call(this,t),this.slotsRedraw=!0;var o={onupdate:function(){e.slotsRedraw=!1},view:function(t){return b()("button",{onmousedown:function(t){t.stopPropagation()},onclick:function(){e.code.trigger(0)}},"button")}};this.slots.push(o)}}]),n}(ot);function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var ht=function(){function t(){u()(this,t)}return c()(t,null,[{key:"START",get:function(){return"start"}},{key:"MOVE",get:function(){return"move"}},{key:"END",get:function(){return"end"}}]),t}(),vt=function(t){p()(n,t);var e=dt(n);function n(t){var o;return u()(this,n),o=e.call(this),t&&o.init(t),o}return c()(n,[{key:"init",value:function(t){var e=this;this.element=t,this.mousedown=!1;var n=[0,0],o=function(t){if(!e.mousedown){t.register=e,e.mousedown=!0;var o=t.touches?t.touches[0]:t;m.b.set(n,o.pageX,o.pageY),t.mousePos=n,e.fire(ht.START,t),t.stopPropagation()}},r=function(t){if(e.mousedown){t.register=e;var o=t.touches?t.touches[0]:t,r=[0,0];m.b.set(r,o.pageX,o.pageY);var i=m.a.sub(r,n);m.b.set.apply(m.b,[n].concat(r)),t.mousePos=n,t.movePos=i,e.fire(ht.MOVE,t),t.stopPropagation()}},i=function(t){if(e.mousedown){t.register=e,e.mousedown=!1;var o=t.touches?t.touches[0]:t;o&&m.b.set(n,o.pageX,o.pageY),t.mousePos=n,e.fire(ht.END,t),t.stopPropagation()}};if(U())this.element.addEventListener("touchstart",o),this.element.addEventListener("touchmove",r),this.element.addEventListener("touchend",i);else{var u=function t(e){window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",t),i(e)};this.element.addEventListener("mousedown",(function(t){window.addEventListener("mousemove",r),window.addEventListener("mouseup",u),o(t)}))}}},{key:"pos",get:function(){return B(this.element)},set:function(t){!function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"}(this.element,t)}}]),n}(I),yt=function(){function t(){u()(this,t),this.list=[],this.connectList=[],this.valueList=[]}return c()(t,[{key:"addValue",value:function(t,e){this.valueList.push({name:t,value:e,list:[],type:e.constructor.name})}},{key:"getValueList",value:function(t){return this.valueList[t].list}},{key:"getValue",value:function(t){return this.valueList[t].value}},{key:"setValue",value:function(t,e){this.valueList[t].value=e,this.valueList[t].list.forEach((function(t){t.resetOutputs(),t.nextFlow()}))}},{key:"add",value:function(t){t.init(this),this.list.push(t)}},{key:"addConnect",value:function(t){var e=t.output.component,n=t.input.component,o=e.outputList[t.output.num],r=n.inputList[t.input.num];r.connectList.push(t.output),o.connectList.push(t.input),"Exec"!=o.type&&(r.data=o.data),"type"!=n.type&&(e.resetOutputs(),e.nextFlow()),this.connectList.push(t)}}]),t}();function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h()(this,n)}}var gt=function(t){p()(n,t);var e=mt(n);function n(t){var o;u()(this,n),o=e.call(this);var r=new vt(t),i=new K(t);o.setCollisionGraph({type:"rect",pos:B(t),size:X(t)}),o.selectRect=null,o.operate="",o.pinPos=[0,0],o.currentControl=null,o.hoverControl=null,o.selectList=[],o.selectRange=[],o.mousePos=[0,0];var s=null;return i.on("press",(function(t){o.hoverControl&&o.hoverControl.bubbleFire("press",{mousePos:t.mousePos})})),i.on("move",(function(t){m.b.set.apply(m.b,[o.mousePos].concat(l()(t.mousePos)));var e=o.pointDeepHitTest(t.mousePos);o.hoverControl!=e&&(o.hoverControl&&o.hoverControl.bubbleFire("leave"),o.hoverControl=e,o.hoverControl&&o.hoverControl.bubbleFire("enter"))})),i.on("release",(function(t){o.hoverControl&&o.hoverControl.bubbleFire("release",{mousePos:t.mousePos})})),r.on(ht.START,(function(t){s=o.hoverControl,o.currentControl=o.hoverControl,m.b.set.apply(m.b,[o.pinPos].concat(l()(t.mousePos))),o.currentControl&&o.currentControl!=S()(o)&&o.selectList.every((function(t){return t!=o.currentControl}))&&(o.setOperate(""),o.selectRange=[o.currentControl],o.setOperate("selectActive")),o.currentControl&&(o.currentControl.bubbleFire("start",{mousePos:t.mousePos}),o.currentControl.parent&&o.currentControl.parent.setTop(o.selectList))})),r.on(ht.MOVE,(function(t){o.currentControl&&o.currentControl.bubbleFire("drag",{mousePos:t.mousePos,movePos:t.movePos}),s!=o.hoverControl&&(s&&o.currentControl==s&&s.bubbleFire("dragLeave",{mousePos:t.mousePos}),o.hoverControl&&o.currentControl!=o.hoverControl&&o.hoverControl.bubbleFire("dragEnter",{mousePos:t.mousePos}),s=o.hoverControl),"selectActive"==o.operate&&o.selectList.forEach((function(e){e!=o.currentControl&&e.bubbleFire("drag",{mousePos:t.mousePos,movePos:t.movePos})}))})),r.on(ht.END,(function(t){o.currentControl&&o.currentControl.bubbleFire("end",{mousePos:t.mousePos})})),o.on("start",(function(t){o.setOperate("select")})),o.on("drag",(function(t){"select"==o.operate&&(o.selectRect=o.calcRect(o.pinPos,t.mousePos))})),o.on("release",(function(t){"select"==o.operate&&o.setOperate("selectActive")})),o}return c()(n,[{key:"calcRect",value:function(t,e){var n=m.a.min(t,e),o=m.a.max(t,e);return[].concat(l()(n),l()(m.a.sub(o,n)))}},{key:"setOperate",value:function(t){if(this.operate!=t){var e=this.operate;if(this.operate=t,"select"==e||"selectActive"==e&&this.selectList.forEach((function(t){return t.fire("unselect")})),this.fire("changeOperate",t,e),"select"==t)this.selectRange=this.currentControl?this.currentControl.children:[],this.selectRect=this.calcRect(this.mousePos,this.mousePos);else if("selectActive"==t){this.selectRect=this.calcRect(this.pinPos,this.mousePos);var n=this.selectRect.slice(0,2),o=this.selectRect.slice(2,4);this.selectList=this.selectRange.filter((function(t){return t.has("select")&&function(t,e,n){if("rect"==n.type)return o=t,r=e,i=n.pos,u=n.size,o[0]<=i[0]+u[0]&&i[0]<=o[0]+r[0]&&o[1]<=i[1]+u[1]&&i[1]<=o[1]+r[1];var o,r,i,u}(n,o,t.collisionGraph)})),this.selectList.length?this.selectList.forEach((function(t){return t.fire("select")})):this.setOperate("")}}}}]),n}(Z),wt=new(function(){function t(e){var n=this;u()(this,t),this.root=document.querySelector(e),this.time=0,this.code=null,this.connectLine={},this.graphLine=new O,this.control=new gt(this.root),this.control.on("drag",(function(t){"select"==n.control.operate&&b.a.redraw()})),this.control.on("changeOperate",(function(t,e){b.a.redraw()})),this.control.on("release",(function(t){"connectLine"==n.operate&&n.control.setOperate("")})),this.setCode(new yt);!function t(e){requestAnimationFrame(t),n.time=e,n.code.list.forEach((function(t){return t.properties.graph.onExecute(e)})),n.code.connectList.forEach((function(t){return t.properties.graph.onExecute(e)}))}()}return c()(t,[{key:"setOperate",value:function(t){this.control.setOperate(t)}},{key:"addControl",value:function(t){this.control.add(t),this.control.children.sort((function(t,e){return e.src.zindex-t.src.zindex}))}},{key:"setCode",value:function(t){var e=this;this.code=t;var n={view:function(){return"select"==e.control.operate?b()("div.selectRect",{style:{left:"".concat(e.control.selectRect[0],"px"),top:"".concat(e.control.selectRect[1],"px"),width:"".concat(e.control.selectRect[2],"px"),height:"".concat(e.control.selectRect[3],"px")}}):"connectLine"==e.control.operate?b()("svg.connectLine",{width:"100%",height:"100%"},[b()(e.graphLine)]):void 0}},o={view:function(){return[b()("svg.svg",{width:"100%",height:"100%"},e.code.connectList.map((function(t){return b()(t.properties.graph,{key:t.properties.graph.id})}))),b()("div.flowgraphs",e.code.list.map((function(t){return b()(t.properties.graph,{key:t.properties.graph.id})}))),b()("div.front",[b()(n)])]}};b.a.mount(this.root,o)}},{key:"createValue",value:function(t,e){this.code.addValue(t,e)}},{key:"setValue",value:function(t,e){this.code.setValue(t,e),this.code.getValueList(t).forEach((function(t){t.properties.graph.update()})),b.a.redraw()}},{key:"getValue",value:function(t){return this.code.getValue(t)}},{key:"addComponent",value:function(t,e,n){var o=new(r["components_".concat(t)])(P({componentName:t},null!=e?e:{}),n);return o.init(this),o}},{key:"connect",value:function(t,e,n,o){var r=t.code.outputList[e],i=n.code.inputList[o];if(r.type==i.type){"Exec"!=r.type&&i.connectList.length&&n.removeInputConnect(o);var u=new O;return u.root=this,u.connect(t,e,n,o),this.code.addConnect(u.code),u}}},{key:"operate",get:function(){return this.control.operate}}]),t}())("#graph");wt.createValue("a0",3),wt.createValue("a1",6),wt.createValue("a2",!0);var bt=wt.addComponent("getValue",{refIndex:0},{pos:[100,200]}),xt=wt.addComponent("add",void 0,{pos:[400,100]}),kt=wt.addComponent("watch",void 0,{pos:[700,200]}),Lt=wt.addComponent("add",void 0,{pos:[400,400]}),Pt=wt.addComponent("getValue",{refIndex:1},{pos:[100,400]}),Ct=wt.addComponent("button",void 0,{pos:[100,900]}),Et=wt.addComponent("setValue",{refIndex:0,value:100},{pos:[400,900]}),Ot=wt.addComponent("ticker",void 0,{pos:[100,600]}),_t=wt.addComponent("branch",void 0,{pos:[400,600]}),Rt=wt.addComponent("getValue",{refIndex:2},{pos:[150,700]}),Tt=wt.addComponent("box",void 0,{pos:[700,500]}),St=wt.addComponent("box",void 0,{pos:[700,700]}),It=(wt.addComponent("getValue",{refIndex:0},{pos:[100,50]}),wt.addComponent("watch",void 0,{pos:[800,800]}));wt.addComponent("watch",void 0,{pos:[600,100]});wt.connect(bt,0,xt,0),wt.connect(Pt,0,xt,1),wt.connect(bt,0,Lt,1),wt.connect(xt,0,Lt,0),wt.connect(Lt,0,kt,0),wt.connect(Ct,0,Et,0),wt.connect(Ot,0,_t,0),wt.connect(_t,0,Tt,0),wt.connect(_t,1,St,0),wt.connect(Rt,0,_t,1),wt.connect(_t,2,It,0);!function t(e){requestAnimationFrame(t),Math.random()>.99&&wt.setValue(2,!wt.getValue(2))}()}]);